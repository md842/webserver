http {
  server { # HTTPS server using production frontend
    listen                8080 ssl;
    index                 index.html;
    root                  ../personal-website/buildd;

    server_name           localhost;

    ssl_certificate       tests/certs/localhost.crt;
    ssl_certificate_key   tests/certs/localhost.key;

    location = / { # Check for exact match
      # React Router path; serve index
    }

    location = /health { # Check for exact match
      # Handled by HealthRequestHandler, but maybe put something here later.
    }

    location = /projects { # Check for exact match
      # React Router path; serve index
    }

    location = /projects/earth-impact-simulator { # Check for exact match
      # React Router path; serve index
    }

    location ^~ /projects/notebooks { # Longest prefix match
      try_files index.html =404; # React Router path; serve index
    }

    location ^~ /projects/sim { # Longest prefix match
      try_files index.html =404; # React Router path; serve index
    }

    location / { # Fallback
      try_files $uri index.html; # React Router handles 404 by serving index
    }
  }

  server { # HTTP server using production frontend
    listen                8081;
    index                 index.html;
    root                  ../personal-website/build;

    location = / { # Check for exact match
      # React Router path; serve index
    }

    location = /health { # Check for exact match
      # Handled by HealthRequestHandler, but maybe put something here later.
    }

    location = /projects { # Check for exact match
      # React Router path; serve index
    }

    location = /projects/earth-impact-simulator { # Check for exact match
      # React Router path; serve index
    }

    location ^~ /projects/notebooks { # Longest prefix match
      try_files index.html =404; # React Router path; serve index
    }

    location ^~ /projects/sim { # Longest prefix match
      try_files index.html =404; # React Router path; serve index
    }

    location / { # Fallback
      try_files $uri index.html; # React Router handles 404 by serving index
    }
  }
}